# Titanic passengers data comparison library

Library allows to compare Titanic passengers data from local source ('.csv' or '.json' file) and REST API endpoint.

### Testing & Building wheel file

In order to test and build source files into wheel package:
1. Download source files from github repo:
`git clone TBD`
2. Recreate virtual environment based on requirements.txt file
    * Create new clean venv enviroment:
    `python -m venv target_venv_path`
    * Activate virtual environment:
    (on Windows) `target_venv_path\Scripts\activate.bat`
    * Navigate to project root directory and execute:
    `pip install -r requirements.txt`
3. Execute provided unit tests (from project root directory)
`python -m unittest`
4. If unittest are passing, build wheel file
`python setup.py bdist_wheel`
5. After successful execution, new '.whl' file should appear in project_root\dist folder.
6. To install library in new environment:
`pip install path_to_whl_file_generated_in_point_6` 

### Usage
Library contains two main classes:
* `Compare` - class for data comparision, will be described in details later
* `ComparisionException` - custom exception, useful for catching errors generated by this library

In order to import main class:

`from titanic_comparator import Compare`

Imported class expects two main parameters:
- expected data - local file ('.csv' or '.json') with expected Titanic data
- actual data url - url to fetch actual data

After class instantiation, actual comparision is performed and results are preserved
in Compare object. For example:

`cmp = Compare(
    expected_data_path='path_to_local_file',
    actual_data_url='url_to_REST_resource'
)`

In this case, comparision in performed in one-to-one mode, which means that entire
rows from actual data are compared to rows from expected data. In this mode, if given rows
contains even small differences, it will treated as entirely different rows. For example, for
following data:

Expected:

Name | Age
--- | ---
John | 20

Actual:

Name | Age
--- | ----
John | 21

One-to-one comparision will report:

\# of common records for expected and actual data: 0 (because rows differ on 'Age' column)\
\# of records records which occur ONLY in expected data: 1 (original row from expected data - [John, 20])\
\# of additional records in actual data: 1 (original row from actual data - [John, 21])  

Other mode, on-column comparision is also available:

`
cmp = Compare(
    expected_data_path='path_to_local_file',
    actual_data_url='url_to_REST_resource',
    columns='list_of_columns_for_comparision'
)
`

In this mode, more detailed comparision is performed. For example above and columns="Name", output will be:

\# of common records for expected and actual data: 0 (because rows differs on 'Age' column)\
\# of records records which occur ONLY in expected data: 0 (key - John - is present in both columns, so row is not
specific to expected data set)\
\# of additional records in actual data: 0 (key - John - is present in both columns, so row is not
specific to actual data set)\
\# of records with same keys but differences in other columns: 1\
\# of all differences in records with common keys: 1 (only one difference: Age 20 -> 21)  

To create and print report to console, use:

`
cmp.report()
`

Optionally, report can be saved to a file:

`
cmp.report('path_to_target_file')
`

You can tests if both data sets contains EXACTLY same data (same columns, rows) by using:

`
cmp.contains_same_data()
`

Also, you can tests if provided actual data is inside expected data set (no additional rows in actual data and
no differences):

`
cmp.actual_data_in_expected_data()
`

Statistics of the comparision, containing DataFrames with comparision data can be obtained by calling:

`
cmp.get_statistic()
`